<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Emperor</title>
    <!-- core dependencies that are otherwise included via the jupyter notebook -->
    <script src="./vendor/js/require-2.1.22.min.js"></script>
    <script src="./vendor/js/jquery-2.1.4.min.js"></script>
    <meta charset="utf-8">

    <script type="text/javascript">

if ($("#emperor-css").length == 0){{
    $("head").append([

        '<link id="emperor-css" rel="stylesheet" type="text/css" href="./css/emperor.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/jquery-ui.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/slick.grid.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/spectrum.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/chosen.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/jquery.contextMenu.min.css">'
    ]);
}}
</script>


    <style>
      #emperor-notebook-0x80f77b74 {
        height:100vh !important;
        padding: 0px !important;
      }
      body {
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
      }
    </style>
  </head>
  <body>
    <div id='emperor-notebook-0x80f77b74' style="position: relative; width:100%; height:500px;">
  <div class='loading' style="position: absolute;top: 50%;left: 50%;margin-left: -229px; margin-top: -59px; z-index: 10000;height:118px;width:458px;padding:0px"><img src='./img/emperor.png' alt='Emperor resources missing. Expected them to be found in .'></div>
</div>
</div>

<script type="text/javascript">
requirejs.config({
// the left side is the module name, and the right side is the path
// relative to the baseUrl attribute, do NOT include the .js extension
'paths': {
  /* jQuery */
  'jquery': './vendor/js/jquery-2.1.4.min',
  'jqueryui': './vendor/js/jquery-ui.min',
  'jquery_drag': './vendor/js/jquery.event.drag-2.2.min',

  /* jQuery plugins */
  'chosen': './vendor/js/chosen.jquery.min',
  'spectrum': './vendor/js/spectrum.min',
  'position': './vendor/js/jquery.ui.position.min',
  'contextmenu': './vendor/js/jquery.contextMenu.min',

  /* other libraries */
  'underscore': './vendor/js/underscore-min',
  'chroma': './vendor/js/chroma.min',
  'filesaver': './vendor/js/FileSaver.min',
  'blob': './vendor/js/Blob',
  'd3': './vendor/js/d3.min',

  /* THREE.js and plugins */
  'three': './vendor/js/three.min',
  'orbitcontrols': './vendor/js/three.js-plugins/OrbitControls',
  'projector': './vendor/js/three.js-plugins/Projector',
  'svgrenderer': './vendor/js/three.js-plugins/SVGRenderer',

  /* SlickGrid */
  'slickcore': './vendor/js/slick.core.min',
  'slickgrid': './vendor/js/slick.grid.min',
  'slickformatters': './vendor/js/slick.editors.min',
  'slickeditors': './vendor/js/slick.formatters.min',

  /* Emperor's objects */
  'util': './js/util',
  'model': './js/model',
  'view': './js/view',
  'controller': './js/controller',
  'draw': './js/draw',
  'scene3d': './js/sceneplotview3d',
  'abcviewcontroller': './js/abc-view-controller',
  'viewcontroller': './js/view-controller',
  'colorviewcontroller': './js/color-view-controller',
  'visibilitycontroller': './js/visibility-controller',
  'scaleviewcontroller': './js/scale-view-controller',
  'shapecontroller': './js/shape-controller',
  'axescontroller': './js/axes-controller',
  'shape-editor': './js/shape-editor',
  'color-editor': './js/color-editor',
  'scale-editor': './js/scale-editor',
  'shapes': './js/shapes'
},
/*
   Libraries that are not AMD compatible need shim to declare their
   dependencies.
 */
'shim': {
  'jquery_drag': {
    'deps': ['jquery', 'jqueryui']
  },
  'chosen': {
    'deps': ['jquery'],
    'exports': 'jQuery.fn.chosen'
  },
  'contextmenu' : {
    'deps': ['jquery', 'jqueryui', 'position']
  },
  'filesaver' : {
    'deps': ['blob']
  },
  'orbitcontrols': {
    'deps': ['three']
  },
  'projector': {
    'deps': ['three']
  },
  'svgrenderer': {
    'deps': ['orbitcontrols', 'projector']
  },
'slickcore': ['jqueryui'],
'slickgrid': ['slickcore', 'jquery_drag', 'slickformatters',
              'slickeditors']
}
});

requirejs(
["jquery", "model", "controller"],
function($, model, EmperorController) {
  var DecompositionModel = model.DecompositionModel;

  var div = $('#emperor-notebook-0x80f77b74');

  var ids = ['L1S105', 'L1S140', 'L1S208', 'L1S257', 'L1S281', 'L1S57', 'L1S76', 'L1S8', 'L2S155', 'L2S175', 'L2S204', 'L2S222', 'L2S240', 'L2S309', 'L2S357', 'L2S382', 'L3S242', 'L3S294', 'L3S313', 'L3S341', 'L3S360', 'L3S378', 'L4S112', 'L4S137', 'L4S63', 'L5S104', 'L5S155', 'L5S174', 'L5S203', 'L5S222', 'L5S240', 'L6S20', 'L6S68', 'L6S93'];
  var coords = [[0.4227016557507425, -0.563225345277848, 0.04706781758030384, -0.014621701476431825, 0.017064831698011797, 0.006701533240207521], [-0.5783181397115643, -0.5754658807660874, 0.050772142533270795, -0.018029345639553173, 0.019927251795096017, 0.018824157582989304], [0.02229373756581976, -0.5673652445044035, 0.055998178665360304, -0.013580218311045587, 0.0077524766570992686, 0.0075115499436125876], [0.4227016557507425, -0.5254520394190766, 0.046958397108152174, -0.005565534659979374, 0.0008129928005273958, 0.0004727172966280836], [0.6229056148432038, -0.5424964882328184, 0.04981281226620544, -0.00506771319744886, 0.0023350350738007854, 0.0018248044224724418], [0.02229373756581976, -0.5667683906808904, 0.05239334155608107, -0.008713017964326742, 0.009366052042627375, 0.010364698788323379], [0.22249769665828112, -0.5700715471104358, 0.05260724009004885, -0.00903335386232502, 0.00880497838667338, 0.009403935449675818], [-0.5783181397115643, -0.5413086852070712, 0.05186405907444835, -0.012431565428755342, 0.011497760275144986, 0.011323240806347981], [0.02229373756581976, 0.17745116357954144, -0.3173674027429538, -0.26306354158393175, -0.2837736496946795, -0.1170832329950668], [0.22249769665828112, 0.23648119897237982, -0.30186205507282216, -0.2332786218994396, -0.04937789713285968, 0.0021025842357163065], [0.4227016557507425, 0.1184007272950507, -0.34208112894573867, 0.36730196319727615, -0.037981599653784906, 0.10787468316728527], [0.6229056148432038, 0.10305747111356195, -0.3005764087720194, 0.3273178586471715, -0.2039772993949292, -0.2742152972271843], [-0.5783181397115643, 0.31145280742160186, 0.37510241030460356, 0.02284122751495345, 0.032516618238444296, -0.04007267625413967], [0.02229373756581976, 0.19041472556792466, -0.3637758922821357, -0.023817745414768488, 0.16306316480586788, 0.18698218305872896], [0.4227016557507425, 0.25252283733711606, -0.3352336445276158, -0.022862752533913958, 0.1641595710192441, 0.14304988963152301], [0.6229056148432038, 0.20269340588082302, -0.09247715334775988, -0.1618614827181036, 0.267867594162693, -0.29846201891600493], [-0.5783181397115643, -0.5313802426361606, 0.05548411238440865, -0.013832099039218237, 0.008784512143217373, 0.0055983196465491224], [0.02229373756581976, 0.13716517011109378, -0.3320257124189853, -0.2883168087227297, -0.32490139714860566, -0.10688663357950039], [0.22249769665828112, 0.22308624273509858, -0.32031018922297644, -0.25280272677703075, -0.0644599716452911, 0.11640622691991717], [0.4227016557507425, 0.18779383118672993, -0.3090089037069284, 0.25222565336554, 0.0667546825681993, 0.12335563659309676], [0.6229056148432038, 0.10620868519221083, -0.30966618699633314, 0.39923937349456834, -0.11629484514470619, -0.18584910458415205], [-0.5783181397115643, -0.5783181397115643, 0.059756153481093414, -0.015432635711107248, 0.008554837294998471, 0.00830641314120367], [0.4227016557507425, 0.2555205994719373, -0.3258810221569173, -0.020634900480544633, 0.17162114548203386, 0.12251280299737793], [0.6229056148432038, 0.24637214707037638, -0.13631034047355295, -0.16074253060384483, 0.2994411324167925, -0.2186332785457977], [0.02229373756581976, 0.20129225607890058, -0.36455300847170774, 0.041143096796980486, 0.04969744529996378, 0.16922831551498033], [-0.5783181397115643, 0.30413007997266694, 0.31547871715070475, 0.04365239768132236, -0.0730837973430032, 0.0992768188567255], [0.02229373756581976, 0.2820773841463836, 0.36448607574608555, -0.029251027026185143, -0.12109027455812743, 0.13371193050988844], [0.22249769665828112, 0.2678426987896972, 0.3537325782650185, -0.004087923512895877, -0.11225928837498869, 0.08826715640410808], [0.4227016557507425, 0.3067517537720522, 0.37164986457591376, -0.051900713700902976, -0.09785076396893756, 0.09235270929586224], [0.6229056148432038, 0.2854531745803801, 0.39843484651857886, 0.01376417879264015, -0.11695253476862169, 0.09755304820252492], [-0.5783181397115643, 0.30631430821407896, 0.3933924302219088, 0.03794569625304925, 0.044695540376227694, -0.017070227189811125], [0.02229373756581976, 0.26729060804128696, 0.3809159302786317, 0.06733623168641709, 0.06284333160283824, -0.10872787278341647], [0.4227016557507425, 0.30999540333130926, 0.3633475494006579, 0.03271340050559273, 0.08703738122541395, -0.0759014552846771], [0.6229056148432038, 0.2820833236841562, 0.31187439193697175, 0.023446882328971973, 0.09740498346361955, -0.12010355834599637]];
  var pct_var = [-1.0, 37.45890402408805, 22.247923649137878, 6.728123314575606, 4.854377995168743, 4.169003270540721];
  var md_headers = ['SampleID', 'BarcodeSequence', 'LinkerPrimerSequence', 'SampleType', 'Year', 'Month', 'Day', 'Subject', 'ReportedAntibioticUsage', 'DaysSinceExperimentStart', 'Description'];
  var metadata = [['L1S105', 'AGTGCGATGCGT', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '3', '17', '1', 'No', '140', '1_Fece_3_17_2009'], ['L1S140', 'ATGGCAGCTCTA', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2008', '10', '28', '2', 'Yes', '0', '2_Fece_10_28_2008'], ['L1S208', 'CTGAGATACGCG', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '1', '20', '2', 'No', '84', '2_Fece_1_20_2009'], ['L1S257', 'CCGACTGAGATG', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '3', '17', '2', 'No', '140', '2_Fece_3_17_2009'], ['L1S281', 'CCTCTCGTGATC', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '4', '14', '2', 'No', '168', '2_Fece_4_14_2009'], ['L1S57', 'ACACACTATGGC', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '1', '20', '1', 'No', '84', '1_Fece_1_20_2009'], ['L1S76', 'ACTACGTGTGGT', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2009', '2', '17', '1', 'No', '112', '1_Fece_2_17_2009'], ['L1S8', 'AGCTGACTAGTC', 'GTGCCAGCMGCCGCGGTAA', 'gut', '2008', '10', '28', '1', 'Yes', '0', '1_Fece_10_28_2008'], ['L2S155', 'ACGATGCGACCA', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '1', '20', '1', 'No', '84', '1_L_Palm_1_20_2009'], ['L2S175', 'AGCTATCCACGA', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '2', '17', '1', 'No', '112', '1_L_Palm_2_17_2009'], ['L2S204', 'ATGCAGCTCAGT', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '3', '17', '1', 'No', '140', '1_L_Palm_3_17_2009'], ['L2S222', 'CACGTGACATGT', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '4', '14', '1', 'No', '168', '1_L_Palm_4_14_2009'], ['L2S240', 'CATATCGCAGTT', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2008', '10', '28', '2', 'Yes', '0', '2_L_Palm_10_28_2008'], ['L2S309', 'CGTGCATTATCA', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '1', '20', '2', 'No', '84', '2_L_Palm_1_20_2009'], ['L2S357', 'CTAACGCAGTCA', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '3', '17', '2', 'No', '140', '2_L_Palm_3_17_2009'], ['L2S382', 'CTCAATGACTCA', 'GTGCCAGCMGCCGCGGTAA', 'left palm', '2009', '4', '14', '2', 'No', '168', '2_L_Palm_4_14_2009'], ['L3S242', 'ACAGTTGCGCGA', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2008', '10', '28', '1', 'Yes', '0', '1_R_Palm_10_28_2008'], ['L3S294', 'CACGACAGGCTA', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '1', '20', '1', 'No', '84', '1_R_Palm_1_20_2009'], ['L3S313', 'AGTGTCACGGTG', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '2', '17', '1', 'No', '112', '1_R_Palm_2_17_2009'], ['L3S341', 'CAAGTGAGAGAG', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '3', '17', '1', 'No', '140', '1_R_Palm_3_17_2009'], ['L3S360', 'CATCGTATCAAC', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '4', '14', '1', 'No', '168', '1_R_Palm_4_14_2009'], ['L3S378', 'ATCGATCTGTGG', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2008', '10', '28', '2', 'Yes', '0', '2_R_Palm_10_28_2008'], ['L4S112', 'GCGTTACACACA', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '3', '17', '2', 'No', '140', '2_R_Palm_3_17_2009'], ['L4S137', 'GAACTGTATCTC', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '4', '14', '2', 'No', '168', '2_R_Palm_4_14_2009'], ['L4S63', 'CTCGTGGAGTAG', 'GTGCCAGCMGCCGCGGTAA', 'right palm', '2009', '1', '20', '2', 'No', '84', '2_R_Palm_1_20_2009'], ['L5S104', 'CAGTGTCAGGAC', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2008', '10', '28', '1', 'Yes', '0', '1_Tong_10_28_2008'], ['L5S155', 'ATCTTAGACTGC', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '1', '20', '1', 'No', '84', '1_Tong_1_20_2009'], ['L5S174', 'CAGACATTGCGT', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '2', '17', '1', 'No', '112', '1_Tong_2_17_2009'], ['L5S203', 'CGATGCACCAGA', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '3', '17', '1', 'No', '140', '1_Tong_3_17_2009'], ['L5S222', 'CTAGAGACTCTT', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '4', '14', '1', 'No', '168', '1_Tong_4_14_2009'], ['L5S240', 'CTGGACTCATAG', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2008', '10', '28', '2', 'Yes', '0', '2_Tong_10_28_2008'], ['L6S20', 'GAGGCTCATCAT', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '1', '20', '2', 'No', '84', '2_Tong_1_20_2009'], ['L6S68', 'GATACGTCCTGA', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '3', '17', '2', 'No', '140', '2_Tong_3_17_2009'], ['L6S93', 'GATTAGCACTCT', 'GTGCCAGCMGCCGCGGTAA', 'tongue', '2009', '4', '14', '2', 'No', '168', '2_Tong_4_14_2009']];
  var axesNames = ['DaysSinceExperimentStart', 0, 1, 2, 3, 4];

  var dm, ec;

  function init() {
    // Initialize the DecompositionModel
    dm = new DecompositionModel(name, ids, coords, pct_var,
                                md_headers, metadata, axesNames);
    // Initialize the EmperorController
    ec = new EmperorController(dm, 'emperor-notebook-0x80f77b74');
  }

  function animate() {
    requestAnimationFrame(animate);
    ec.render();
  }
  $(window).resize(function() {
    ec.resize(div.innerWidth(), div.innerHeight());
  });

  $(function(){
    init();
    animate();

  });

}); // END REQUIRE.JS block
</script>
  </body>
</html>